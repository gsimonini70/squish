# Production Profile
# ==================
# Activate with: --spring.profiles.active=prod

compressor:
  mode: ${COMPRESSION_MODE:AGGRESSIVE}
  dry-run: ${DRY_RUN:false}

  database:
    jdbc-url: ${DB_URL:jdbc:oracle:thin:@//localhost:1521/ORCLPDB1}
    username: ${DB_USER:user}
    password: ${DB_PASSWORD:password}
    max-pool-size: 16

  # Query Configuration - table/column names
  query:
    master-table: ${MASTER_TABLE:OTTICA}
    detail-table: ${DETAIL_TABLE:OTTICAI}
    tracking-table: ${TRACKING_TABLE:SQUISH_PROCESSED}
    id-column: ${ID_COLUMN:OTT_ID}
    filename-column: ${FILENAME_COLUMN:OTT_NOME_FILE}
    detail-id-column: ${DETAIL_ID_COLUMN:OTTI_ID}
    data-column: ${DATA_COLUMN:OTTI_DATA}
    # Generic WHERE clause filter (e.g. "COL = 'val' AND COL2 IN ('a','b')")
    master-table-filter: ${MASTER_TABLE_FILTER:OTT_TIPO_DOC = '001030'}

  pipeline:
    worker-threads: ${WORKER_THREADS:16}
    id-from: ${ID_FROM:0}
    id-to: ${ID_TO:0}

  # HTTPS Dashboard (optional)
  http:
    port: ${HTTP_PORT:8080}
    ssl-enabled: ${HTTP_SSL_ENABLED:false}
    keystore-path: ${HTTP_KEYSTORE_PATH:}
    keystore-password: ${HTTP_KEYSTORE_PASSWORD:}
    keystore-type: ${HTTP_KEYSTORE_TYPE:PKCS12}
    ssl-protocol: ${HTTP_SSL_PROTOCOL:TLSv1.3}

  watchdog:
    enabled: ${WATCHDOG_ENABLED:true}
    poll-interval-seconds: ${WATCHDOG_INTERVAL:300}

  # Report Configuration
  report:
    enabled: ${REPORT_ENABLED:true}
    directory: ${REPORT_DIRECTORY:reports}

  # Email with secure protocols
  email:
    enabled: ${EMAIL_ENABLED:true}
    smtp-host: ${SMTP_HOST:smtp.company.com}
    smtp-port: ${SMTP_PORT:587}
    smtp-user: ${SMTP_USER:}
    smtp-password: ${SMTP_PASSWORD:}
    ssl: ${SMTP_SSL:false}
    starttls: ${SMTP_STARTTLS:true}
    ssl-protocols: ${SMTP_SSL_PROTOCOLS:TLSv1.2,TLSv1.3}
    trust-all-certs: false
    connection-timeout: 10000
    read-timeout: 30000
    from: ${SMTP_FROM:pdf-compressor@company.com}
    to:
      - ${SMTP_TO:it-operations@company.com}

logging:
  level:
    root: WARN
    com.lucsartech.pdf: INFO
